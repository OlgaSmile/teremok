jQuery(document).ready((function(e){const t=e("#name-label"),a=e("#detalies-name"),n=e("#text-details");var i=document.querySelector("#phone"),l=window.intlTelInput(i,{initialCountry:"ua",separateDialCode:!0,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});i.addEventListener("input",(function(){if("380"!==l.getSelectedCountryData().dialCode)if(l.isValidNumber()){a=l.getNumber(intlTelInputUtils.numberFormat.NATIONAL);l.setNumber(a),e("#error-phone").text("")}else e("#error-phone").text("Не вірно введений номер");else{const n=9;var t=i.value.replace(/\D/g,"");if(t.length>n&&(t=t.substring(0,n)),i.value=t,l.isValidNumber()){var a=l.getNumber(intlTelInputUtils.numberFormat.NATIONAL);l.setNumber(a),e("#error-phone").text("")}else e("#error-phone").text("Не вірно введений номер")}})),a.on("input",(t=>{if(!t.target||"string"!=typeof t.target.value)return;const a=t.target.value||"",n=a.trim().length,i=a.replace(/[^a-zA-ZА-Яа-яЁёІіЇїЄє]/g,"");t.target.value=String(i),n<2&&e("#validation-name").text("Введіть не менше ніж 2 символа"),n>=2&&e("#validation-name").text(""),i.length>40&&(t.target.value=i.substring(0,40)),e("#current-length-name").text(n)})),a.on("click",(e=>{t.addClass("active")})),a.on("focus",(e=>{t.addClass("active")})),e(".secttion-details-agreement").on("click",(e=>{if(!a.val().trim()){a.val("");a.is(e.target)||t.removeClass("active")}})),n.on("input",(function(t){this.style.height="auto",this.style.height=this.scrollHeight+"px";const a=t.target.value.trim().length;a<40&&e("#validation-text-details").text("Введіть не менше ніж 40 символів"),a>40&&e("#validation-text-details").text(""),a>1e3&&(t.target.value=t.target.value.substring(0,1e3)),e("#current-length-text").text(`${a}`)})),e("#text-details").on("click",(function(t){e("#paleceholder-text-details").addClass("active")})),e("#text-details").on("focus",(function(t){e("#paleceholder-text-details").addClass("active")})),e(".secttion-details-agreement").on("click",(t=>{if(!n.val().trim()){e("#text-details").is(t.target)||(n.val(""),e("#paleceholder-text-details").removeClass("active"))}})),e("#form-details-agreement").on("submit",(function(t){t.preventDefault();const a={action:"do_insert_detalies",name:t.target.name.value,phone:l.getNumber(),text:t.target.text.value};if(a.name.trim().length<2)return e("error-name").text("Поле обов’язкове для заповнення");console.log(a,"name formData"),e.ajax({url:businessAjax.ajaxurl,type:"POST",data:a,success:function(t){e("#form-details-agreement")[0].reset(),resetForm()},error:function(e,t,a){console.log(a)}})}))}));