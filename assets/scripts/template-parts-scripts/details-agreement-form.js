jQuery(document).ready((function(e){const t=e("#name-label"),a=e("#detalies-name"),i=e("#text-details"),n=document.querySelector("#phone");if(n){const t=window.intlTelInput(n,{initialCountry:"ua",separateDialCode:!0,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});n.addEventListener("input",(function(){if("380"!==t.getSelectedCountryData().dialCode)if(t.isValidNumber()){i=t.getNumber(intlTelInputUtils.numberFormat.NATIONAL);t.setNumber(i),e("#error-phone").text("")}else e("#error-phone").text("Не вірно введений номер");else{const l=9;var a=n.value.replace(/\D/g,"");if(a.length>l&&(a=a.substring(0,l)),n.value=a,t.isValidNumber()){var i=t.getNumber(intlTelInputUtils.numberFormat.NATIONAL);t.setNumber(i),e("#error-phone").text("")}else e("#error-phone").text("Не вірно введений номер")}}))}a.on("input",(t=>{if(!t.target||"string"!=typeof t.target.value)return;const a=(t.target.value||"").replace(/[^a-zA-ZА-Яа-яЁёІіЇїЄє\s]/g,"");console.log(a,"sanitizedValue"),t.target.value=a;const i=a.trim().length;i<2&&e("#validation-name").text("Введіть не менше ніж 2 символа"),i>=2&&e("#validation-name").text(""),i>40&&(t.target.value=a.substring(0,40)),e("#current-length-name").text(i)})),a.on("click",(e=>{t.addClass("active")})),a.on("focus",(e=>{t.addClass("active")})),e(".secttion-details-agreement").on("click",(e=>{if(!a.val().trim()){a.val("");a.is(e.target)||t.removeClass("active")}})),i.on("input",(function(t){this.style.height="auto",this.style.height=this.scrollHeight+"px";const a=t.target.value.trim().length;a<40&&e("#validation-text-details").text("Введіть не менше ніж 40 символів"),a>40&&e("#validation-text-details").text(""),a>1e3&&(t.target.value=t.target.value.substring(0,1e3)),e("#current-length-text").text(`${a}`)})),e("#text-details").on("click",(function(t){e("#paleceholder-text-details").addClass("active")})),e("#text-details").on("focus",(function(t){e("#paleceholder-text-details").addClass("active")})),e(".secttion-details-agreement").on("click",(t=>{if(!i.val().trim()){e("#text-details").is(t.target)||(i.val(""),e("#paleceholder-text-details").removeClass("active"))}})),e("#form-details-agreement").on("submit",(function(t){t.preventDefault();const a={action:"do_insert_detalies",name:t.target.name.value,phone:iti.getNumber(),text:t.target.text.value};if(a.name.trim().length<2)return e("error-name").text("Поле обов’язкове для заповнення");e.ajax({url:businessAjax.ajaxurl,type:"POST",data:a,success:function(t){e("#form-details-agreement")[0].reset(),resetForm()},error:function(e,t,a){console.log(a)}})}))}));